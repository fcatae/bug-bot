<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <style>
        body {
            background-color: darkblue;
        }
        iframe {
            position: fixed;
            border: 1px solid black;
            top: 0;
            right: 0;
            width: 40rem;
            height: 20rem;
        }
    </style>

    <script>
        var templateUrl = 'template.html?user=fab&redirect=/ok.html';

        function openForm() {
            feedbackForm.src = 'template.html?user=fab&redirect=/ok.html';
            feedbackForm.style.display = 'block'
        }
        function closeForm() {
            feedbackForm.src = '';
            feedbackForm.style.display = 'none';
        }
        function checkForm(url) {
            var isTemplate = url.indexOf(templateUrl) >= 0;
            var isValidPage = url.startsWith('http');

            if (isValidPage && (!isTemplate)) {
                // closeForm();
            }
        }
    </script>
    <button onclick="openForm()">Open</button>
    <button onclick="closeForm()">Close</button>
    
    <div class="main">
        <iframe id="feedbackForm" src="" style="display: none" onload="checkForm(this.contentWindow.location.toString())"></iframe>
    </div>
</body>
</html>